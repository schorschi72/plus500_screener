import os
import sys
import subprocess
import threading
import time
import webbrowser

def open_browser():
    time.sleep(2)  # bisschen warten, bis Streamlit läuft
    webbrowser.open_new("http://localhost:8501")

def main():
    # Arbeitsverzeichnis auf den Ordner der EXE setzen
    base_dir = os.path.dirname(os.path.abspath(sys.argv[0]))
    os.chdir(base_dir)

    # Browser automatisch öffnen
    threading.Thread(target=open_browser, daemon=True).start()

    # Streamlit starten
    cmd = [
        sys.executable, "-m", "streamlit", "run", "app.py",
        "--server.headless=true",
        "--server.port=8501"
    ]

    subprocess.run(cmd, check=False)

if __name__ == "__main__":
    main()